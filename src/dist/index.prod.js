"use strict";var cron=require("node-cron"),axios=require("axios"),fs=require("fs"),convert=require("xml-js"),dataInicial="01-01-1990",dataFinal="12-31-2020",link="https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/CotacaoDolarPeriodo(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)?@dataInicial=%27".concat(dataInicial,"%27&@dataFinalCotacao=%27").concat(dataFinal,"%27&$format=json&$select=cotacaoCompra,cotacaoVenda,dataHoraCotacao"),getCotacao=function(){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(axios.get(link));case 3:return a.abrupt("return",a.sent);case 6:a.prev=6,a.t0=a.catch(0),console.error(a.t0);case 9:case"end":return a.stop()}},null,null,[[0,6]])},retornaCotacao=function(){var e,t,o,r,n,c,i,s;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(getCotacao());case 2:e=a.sent,t=e.data.value,o={compact:!0,spaces:4,ignoreText:!1},r=convert.js2xml(t,o),n=/<[0-9]+>/gm,c=/<\/[0-9]+>/gm,i=new Date,r="<COTACAO>\n"+r.replace(n,"<COTACOES>").replace(c,"</COTACOES>")+"\n</COTACAO>",s="./cotacoes.xml",fs.writeFile(s,r,function(a){return a?console.log(a):void console.log("Arquivo cotacoes.xml gerado no diret√≥rio ".concat(s," em ").concat(i))});case 13:case"end":return a.stop()}})};retornaCotacao();