"use strict";var cron=require("node-cron"),axios=require("axios"),convert=require("xml-js"),_require=require("./utils/utils"),escreverArquivo=_require.escreverArquivo,dataAtualFormatada=_require.dataAtualFormatada,dataInicial="01-01-1990",dataFinal="12-31-2020",link="https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/CotacaoDolarPeriodo(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)?@dataInicial=%27".concat(dataInicial,"%27&@dataFinalCotacao=%27").concat(dataFinal,"%27&$format=json&$select=cotacaoCompra,cotacaoVenda,dataHoraCotacao"),getCotacao=function(){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(axios.get(link));case 3:return a.abrupt("return",a.sent);case 6:a.prev=6,a.t0=a.catch(0),console.error(a.t0);case 9:case"end":return a.stop()}},null,null,[[0,6]])},retornaCotacao=function(){var e,r,t,o,n,c;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(getCotacao());case 2:e=a.sent,r={compact:!0,spaces:4,ignoreText:!1},t=/<[0-9]+>/gm,o=/<\/[0-9]+>/gm,dataAtualFormatada(),n=e.data.value,c="<COTACAO>\n"+(c=convert.js2xml(n,r)).replace(t,"<COTACOES>").replace(o,"</COTACOES>")+"\n</COTACAO>",escreverArquivo("./cotacoes.xml",c);case 13:case"end":return a.stop()}})};retornaCotacao();